---
title: Networking
description: WireGuard VPN tunnel between a public VPS and private home server, with Nginx Proxy Manager for reverse proxying.
---

## Overview

The networking setup solves a common home lab problem: how to expose services to the internet without a static IP or open ports on your home router. The solution uses a WireGuard VPN tunnel between a cheap public VPS and the home server, with Nginx Proxy Manager (NPM) handling reverse proxying and TLS.

## Architecture

```
Internet
    │
    ▼
┌──────────────────────────────────┐
│  Public VPS                      │
│  IP: PUBLIC_SERVER_IP            │
│                                  │
│  WireGuard (wg0)                 │
│  Address: 10.0.0.2              │
│  Port: 51822                     │
│                                  │
│  iptables:                       │
│    :80  → 10.0.0.1:80           │
│    :443 → 10.0.0.1:443          │
│    MASQUERADE on wg0             │
└──────────┬───────────────────────┘
           │ WireGuard tunnel
           │ (encrypted UDP)
┌──────────┴───────────────────────┐
│  Home Server                     │
│                                  │
│  WireGuard (wg0)                 │
│  Address: 10.0.0.1              │
│  Port: 51821                     │
│                                  │
│  ┌────────────────────────────┐  │
│  │ Nginx Proxy Manager        │  │
│  │ :80 (HTTP)                 │  │
│  │ :443 (HTTPS)               │  │
│  │ :81 (Admin UI)             │  │
│  └─────────────┬──────────────┘  │
│                │                 │
│  ┌─────────────┴──────────────┐  │
│  │ Internal services          │  │
│  │ (Jellyfin, Coder, etc.)    │  │
│  └────────────────────────────┘  │
└──────────────────────────────────┘
```

### How it works

1. DNS records point your domain at the public VPS IP
2. Traffic hits the VPS on ports 80/443
3. iptables rules on the VPS forward that traffic through the WireGuard tunnel to 10.0.0.1 (home server)
4. Nginx Proxy Manager on the home server receives the traffic and routes it to the correct internal service based on the hostname
5. NPM handles TLS certificates (Let's Encrypt) and reverse proxying

**Result**: Your home services are accessible via `https://service.yourdomain.com` without exposing your home IP.

## Quick start

1. Set up WireGuard on both servers
2. Deploy Nginx Proxy Manager on the home server
3. Configure DNS records
4. Add proxy hosts in NPM

For the full step-by-step guide, see [WireGuard Setup](/docs/networking/wireguard).
